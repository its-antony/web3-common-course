import type { Presentation } from '@/types/slide'

export const part02: Presentation = {
  id: 'part02',
  title: '区块链与加密系统',
  partNumber: 2,
  slides: [
    // Part 标题页
    {
      id: '02-title',
      type: 'title',
      title: 'Part 2: 区块链与加密系统',
      subtitle: '理解 Web3 的技术基石',
    },

    // ========== 2.1 区块链解决的核心问题是什么 ==========
    {
      id: '2.1-section',
      type: 'section',
      title: '2.1 区块链解决的核心问题',
      subtitle: '双重支付与拜占庭将军问题',
    },
    {
      id: '2.1-01',
      type: 'content',
      title: '数字世界的信任困境',
      content: [
        {
          type: 'text',
          value: '在物理世界，一张百元纸币只能在一个地方。但在数字世界，数字信息可以被无限复制。',
        },
        {
          type: 'highlight',
          value: '双重支付问题（Double Spending Problem）：如何防止一个人把同一笔钱花两次？',
        },
      ],
    },
    {
      id: '2.1-02',
      type: 'content',
      title: '传统的解决方案：找个「中间人」',
      content: [
        {
          type: 'bullets',
          items: [
            '银行帮你记录「你有多少钱」',
            '支付宝帮你记录「你的余额是多少」',
            '游戏公司帮你记录「你有哪些装备」',
          ],
        },
        {
          type: 'highlight',
          value: '这套系统的根本假设：你必须信任这个中心机构。',
        },
      ],
    },
    {
      id: '2.1-03',
      type: 'comparison',
      title: '当信任被打破',
      content: [
        {
          type: 'table',
          headers: ['你需要相信……', '如果信任被打破……'],
          rows: [
            ['银行不会冻结你的账户', '2013 年塞浦路斯银行危机，储户存款被强制扣减'],
            ['平台不会删除你的数据', '微信封号，所有聊天记录、好友关系都没了'],
            ['机构不会篡改记录', '安然公司财务造假，股东血本无归'],
          ],
        },
      ],
    },
    {
      id: '2.1-04',
      type: 'content',
      title: '拜占庭将军问题',
      content: [
        {
          type: 'text',
          value: '几位将军需要达成一致：进攻还是撤退。但其中可能有叛徒发送不同的指令。',
        },
        {
          type: 'bullets',
          items: [
            '将军 = 网络中的节点（计算机）',
            '进攻/撤退 = 确认某笔交易是否有效',
            '叛徒 = 试图作弊的恶意节点',
            '达成共识 = 全网认可同一个账本版本',
          ],
        },
        {
          type: 'highlight',
          value: '本质问题：在存在恶意参与者的分布式系统中，如何达成可信共识？',
        },
      ],
    },
    {
      id: '2.1-05',
      type: 'content',
      title: '区块链的解决方案',
      content: [
        {
          type: 'numbered',
          items: [
            '时间戳：给交易排队，只承认时间靠前的那笔',
            '工作量证明：让作弊代价高昂（矿工投入真金白银）',
            '链式结构：让篡改成本指数级增长（每个区块包含前一个的「指纹」）',
          ],
        },
      ],
    },
    {
      id: '2.1-06',
      type: 'comparison',
      title: '核心价值：去信任化（Trustless）',
      content: [
        {
          type: 'table',
          headers: ['传统模式', '区块链模式'],
          rows: [
            ['信任机构（银行、平台）', '信任规则（代码、协议）'],
            ['规则由机构制定和解释', '规则写死在代码里，自动执行'],
            ['依赖机构承诺', '依赖数学保证'],
          ],
        },
      ],
    },
    {
      id: '2.1-07',
      type: 'quote',
      title: '区块链的本质',
      content: [
        {
          type: 'text',
          value: '区块链让我们从「信任人」变成「信任数学」。',
        },
      ],
    },
    {
      id: '2.1-summary',
      type: 'summary',
      title: '2.1 本节要点',
      content: [
        {
          type: 'bullets',
          items: [
            '双重支付问题：如何防止数字货币被花两次',
            '拜占庭将军问题：分布式系统中的信任难题',
            '区块链通过时间戳、工作量证明、链式结构解决这些问题',
            '去信任化：信任代码和数学规则，而非特定机构',
          ],
        },
      ],
    },

    // ========== 2.2 比特币的可信逻辑 ==========
    {
      id: '2.2-section',
      type: 'section',
      title: '2.2 比特币的可信逻辑',
      subtitle: '理解第一个去中心化数字货币',
    },
    {
      id: '2.2-01',
      type: 'content',
      title: '一篇改变世界的论文',
      content: [
        {
          type: 'text',
          value: '2008 年 10 月 31 日，中本聪发布了《Bitcoin: A Peer-to-Peer Electronic Cash System》。',
        },
        {
          type: 'highlight',
          value: '核心问题：能不能在不依赖银行的情况下，让两个陌生人直接转账？',
        },
      ],
    },
    {
      id: '2.2-02',
      type: 'content',
      title: '比特币的三大核心机制',
      content: [
        {
          type: 'numbered',
          items: [
            '区块链结构：每个区块包含前一个区块的哈希值，篡改历史需要重算所有后续区块',
            '工作量证明：谁先解出数学难题，谁就有权写入新区块（挖矿）',
            '激励机制：让经济激励和安全目标一致，诚实比作弊更划算',
          ],
        },
      ],
    },
    {
      id: '2.2-03',
      type: 'comparison',
      title: '矿工的策略分析',
      content: [
        {
          type: 'table',
          headers: ['策略', '成本', '收益', '结果'],
          rows: [
            ['诚实挖矿', '电费 + 矿机', '区块奖励 + 手续费', '持续获利'],
            ['作弊攻击', '电费 + 矿机', '可能的双重支付 - 币价暴跌损失', '大概率亏损'],
          ],
        },
      ],
    },
    {
      id: '2.2-04',
      type: 'comparison',
      title: '「可信」从哪里来？',
      content: [
        {
          type: 'table',
          headers: ['传统金融', '比特币'],
          rows: [
            ['相信银行不会冻结账户', '没有人能冻结你的比特币'],
            ['相信央行不会滥发货币', '总量固定 2100 万枚，写死在代码里'],
            ['需要提交身份证明', '创建钱包不需要任何证件'],
          ],
        },
      ],
    },
    {
      id: '2.2-05',
      type: 'content',
      title: '「无需信任」的真正含义',
      content: [
        {
          type: 'bullets',
          items: [
            '不是「不需要信任任何东西」',
            '而是「不需要信任某个特定的人或机构」',
          ],
        },
        {
          type: 'text',
          value: '你信任的是：',
        },
        {
          type: 'numbered',
          items: [
            '开源代码（任何人都可以审查）',
            '数学规则（无法被人为修改）',
            '经济激励（让作弊无利可图）',
          ],
        },
      ],
    },
    {
      id: '2.2-06',
      type: 'comparison',
      title: '比特币的局限性',
      content: [
        {
          type: 'table',
          headers: ['局限', '具体表现', '原因'],
          rows: [
            ['慢', '每笔交易需要约 10 分钟确认', 'PoW 设计，保证安全性的代价'],
            ['贵', '高峰期手续费可达数十美元', '区块容量有限'],
            ['耗能', '全网年耗电量约等于一个中等国家', 'PoW 需要大量算力竞争'],
            ['简单', '只能转账，无法运行复杂程序', '设计目标是「电子现金」'],
          ],
        },
      ],
    },
    {
      id: '2.2-summary',
      type: 'summary',
      title: '2.2 本节要点',
      content: [
        {
          type: 'bullets',
          items: [
            '比特币通过区块链结构、工作量证明、激励机制实现去信任化',
            '无需信任 = 信任代码和数学规则，而非特定机构',
            '比特币有局限：慢、贵、耗能、功能简单',
            '这些局限催生了以太坊、Layer2、PoS 等创新',
          ],
        },
      ],
    },

    // ========== 2.3 去中心化到底「去掉了什么」 ==========
    {
      id: '2.3-section',
      type: 'section',
      title: '2.3 去中心化去掉了什么',
      subtitle: '理解去中心化的真正含义',
    },
    {
      id: '2.3-01',
      type: 'content',
      title: '「去中心化」是一个被滥用的词',
      content: [
        {
          type: 'text',
          value: '几乎每个项目都宣称自己是「去中心化」的。但如果你仔细观察：',
        },
        {
          type: 'bullets',
          items: [
            '有的「去中心化交易所」，关键代码只有几个人能改',
            '有的「去中心化应用」，数据存储在中心化服务器上',
            '有的「去中心化网络」，前三大节点控制着 50% 的算力',
          ],
        },
      ],
    },
    {
      id: '2.3-02',
      type: 'comparison',
      title: '理解「中心化」：三个维度',
      content: [
        {
          type: 'table',
          headers: ['维度', '问的问题', '中心化例子', '去中心化例子'],
          rows: [
            ['架构层', '服务器在哪？有多少台？', '微信：服务器在腾讯', '比特币：全球数万个节点'],
            ['政治层', '谁说了算？', '抖音：字节跳动制定规则', '比特币：没人能单方面改规则'],
            ['逻辑层', '数据是否统一？', '区块链：全网数据一致', '互联网：每个网站数据独立'],
          ],
        },
      ],
    },
    {
      id: '2.3-03',
      type: 'content',
      title: '去中心化「去掉」的三件事',
      content: [
        {
          type: 'numbered',
          items: [
            '去掉了「单点故障」的风险：即使一半节点下线，网络依然运行',
            '去掉了「审查和封禁」的权力：没有人能封禁你的区块链账户',
            '去掉了「任意修改规则」的权力：规则由代码定义，修改需共识',
          ],
        },
      ],
    },
    {
      id: '2.3-04',
      type: 'content',
      title: '去中心化「没去掉」的东西',
      content: [
        {
          type: 'numbered',
          items: [
            '仍然需要规则和共识：每条链都有自己的协议规则',
            '仍然有治理和决策：代码需要人写，漏洞需要人修',
            '仍然可能出现权力集中：矿池、鲸鱼、核心开发者',
          ],
        },
        {
          type: 'highlight',
          value: '去中心化改变的是「谁有权参与决策」，而不是「不需要决策」。',
        },
      ],
    },
    {
      id: '2.3-05',
      type: 'content',
      title: '去中心化是一个「光谱」',
      content: [
        {
          type: 'text',
          value: '不要把去中心化理解为「0 或 1」的二元对立。它更像一个光谱：',
        },
        {
          type: 'bullets',
          items: [
            '完全中心化 → 传统银行系统',
            '联盟链 → Hyperledger、企业链',
            '公链（较中心化）→ 某些 PoS 链',
            '公链（较去中心化）→ 以太坊',
            '高度去中心化 → 比特币',
          ],
        },
      ],
    },
    {
      id: '2.3-summary',
      type: 'summary',
      title: '2.3 本节要点',
      content: [
        {
          type: 'bullets',
          items: [
            '去中心化可从架构、政治、逻辑三个维度判断',
            '去掉了：单点故障、审查权力、任意改规则',
            '没去掉：规则、治理、可能的权力集中',
            '去中心化是光谱，不是非黑即白',
          ],
        },
      ],
    },

    // ========== 2.4 公链、Layer2、侧链的本质区别 ==========
    {
      id: '2.4-section',
      type: 'section',
      title: '2.4 公链、Layer2、侧链',
      subtitle: '理解不同类型链的本质区别',
    },
    {
      id: '2.4-01',
      type: 'content',
      title: '区块链的「不可能三角」',
      content: [
        {
          type: 'text',
          value: '区块链无法同时完美实现三个目标，必须在其中做取舍：',
        },
        {
          type: 'numbered',
          items: [
            '去中心化：节点分布广，没有中心控制',
            '安全性：抵抗攻击，数据不被篡改',
            '可扩展性：处理大量交易，速度快、费用低',
          ],
        },
      ],
    },
    {
      id: '2.4-02',
      type: 'comparison',
      title: '不同链的取舍',
      content: [
        {
          type: 'table',
          headers: ['链', '选择', '代价'],
          rows: [
            ['比特币', '去中心化 + 安全性', '每秒只能处理约 7 笔交易'],
            ['Solana', '安全性 + 可扩展性', '验证者数量较少'],
            ['BSC', '安全性 + 可扩展性', '只有 21 个验证者'],
          ],
        },
      ],
    },
    {
      id: '2.4-03',
      type: 'content',
      title: '三种「链」的定义',
      content: [
        {
          type: 'bullets',
          items: [
            'Layer1（公链/主链）：底层基础设施，有自己的共识和原生代币（ETH、BTC）',
            'Layer2（二层网络）：建在 L1 之上，在链下处理交易，继承 L1 安全性',
            '侧链：与主链并行运行，有自己的共识，不继承 L1 安全性',
          ],
        },
      ],
    },
    {
      id: '2.4-04',
      type: 'comparison',
      title: 'Layer2 vs 侧链：核心区别',
      content: [
        {
          type: 'table',
          headers: ['维度', 'Layer2', '侧链'],
          rows: [
            ['安全性来源', '继承 L1（以太坊）的安全性', '依赖自己的验证者'],
            ['数据存储', '交易数据提交到 L1', '数据存储在自己的链上'],
            ['如果出问题', '可以用 L1 的数据恢复', 'L1 无法帮助'],
            ['代表项目', 'Arbitrum, Optimism, zkSync', 'Polygon PoS, BSC'],
          ],
        },
      ],
    },
    {
      id: '2.4-05',
      type: 'content',
      title: 'Layer2 的两大流派',
      content: [
        {
          type: 'bullets',
          items: [
            'Optimistic Rollups：先假设你是好人，有 7 天挑战期（Arbitrum、Optimism、Base）',
            'ZK Rollups：用数学证明你是好人，无需等待期（zkSync、StarkNet、Scroll）',
          ],
        },
      ],
    },
    {
      id: '2.4-06',
      type: 'comparison',
      title: '用户视角：选择哪条链？',
      content: [
        {
          type: 'table',
          headers: ['场景', '推荐'],
          rows: [
            ['大额资产长期存储', '以太坊 L1'],
            ['日常使用 DeFi、NFT', 'Arbitrum 或 Optimism'],
            ['高频交易、游戏', 'Polygon 或其他高性能链'],
            ['追求最低费用', 'Polygon PoS'],
          ],
        },
      ],
    },
    {
      id: '2.4-summary',
      type: 'summary',
      title: '2.4 本节要点',
      content: [
        {
          type: 'bullets',
          items: [
            '不可能三角：去中心化、安全性、可扩展性无法同时完美实现',
            'L1 是底层基础设施，L2 继承 L1 安全性，侧链有自己的共识',
            'Layer2 分 Optimistic Rollups 和 ZK Rollups 两大流派',
            '根据场景选择：大额用 L1，日常用 L2，高频用侧链',
          ],
        },
      ],
    },

    // ========== 2.5 模块化区块链与数据可用性 ==========
    {
      id: '2.5-section',
      type: 'section',
      title: '2.5 模块化区块链与 DA',
      subtitle: '区块链架构的新趋势',
    },
    {
      id: '2.5-01',
      type: 'content',
      title: '从「单体」到「模块化」',
      content: [
        {
          type: 'text',
          value: '早期区块链是「单体」的——一条链同时负责执行、共识、存储、结算所有任务。',
        },
        {
          type: 'highlight',
          value: '问题：当用户变多、交易量增加，一条链很快就会拥堵。',
        },
      ],
    },
    {
      id: '2.5-02',
      type: 'content',
      title: '模块化区块链：专业分工',
      content: [
        {
          type: 'table',
          headers: ['层', '职责', '类比'],
          rows: [
            ['执行层', '运行智能合约，处理交易', '工厂车间'],
            ['结算层', '最终确认交易，处理争议', '法院/仲裁'],
            ['共识层', '决定交易的顺序', '排队叫号系统'],
            ['数据可用层（DA）', '存储数据，确保可访问', '公告栏'],
          ],
        },
      ],
    },
    {
      id: '2.5-03',
      type: 'content',
      title: '什么是「数据可用性」？',
      content: [
        {
          type: 'text',
          value: '确保区块链上的数据被正确发布，任何人都可以看到和验证。',
        },
        {
          type: 'bullets',
          items: [
            '如果数据「不可用」，验证者无法检查交易是否有效',
            '没有验证，任何人都可以伪造交易',
            '整个「去信任」的前提就崩塌了',
          ],
        },
      ],
    },
    {
      id: '2.5-04',
      type: 'comparison',
      title: '为什么要单独有 DA 层？',
      content: [
        {
          type: 'table',
          headers: ['方案', '数据存储成本（每 MB）'],
          rows: [
            ['以太坊主网', '~$100'],
            ['Celestia', '~$0.81'],
            ['EigenDA', '更低（有免费层）'],
          ],
        },
        {
          type: 'highlight',
          value: '用专门的 DA 层存储数据，成本可以降低 99%。',
        },
      ],
    },
    {
      id: '2.5-05',
      type: 'comparison',
      title: '主流 DA 项目对比',
      content: [
        {
          type: 'table',
          headers: ['维度', 'Celestia', 'EigenDA'],
          rows: [
            ['定位', '独立的 DA 网络', '以太坊生态的 DA 服务'],
            ['安全性来源', '自己的验证者（质押 TIA）', '以太坊再质押（ETH）'],
            ['适合谁', '想脱离以太坊的项目', '想留在以太坊生态的 Rollup'],
          ],
        },
      ],
    },
    {
      id: '2.5-06',
      type: 'content',
      title: '对普通用户的影响',
      content: [
        {
          type: 'bullets',
          items: [
            '更便宜的 Gas 费：DA 成本下降，Rollup 费用跟着下降',
            '更快的交易：专业化分工提高整体效率',
            '更多选择：启动新 Rollup 变得更容易',
          ],
        },
        {
          type: 'highlight',
          value: '你不需要理解技术原理，但你会享受到它带来的好处。',
        },
      ],
    },
    {
      id: '2.5-summary',
      type: 'summary',
      title: '2.5 本节要点',
      content: [
        {
          type: 'bullets',
          items: [
            '单体区块链一条链做所有事，容易拥堵',
            '模块化区块链将执行、结算、共识、DA 分层',
            'DA 层大幅降低数据存储成本',
            '对用户意味着：更便宜、更快、更多选择',
          ],
        },
      ],
    },

    // ========== 2.6 什么业务不适合上链 ==========
    {
      id: '2.6-section',
      type: 'section',
      title: '2.6 什么业务不适合上链',
      subtitle: '理性看待区块链的适用边界',
    },
    {
      id: '2.6-01',
      type: 'comparison',
      title: '区块链的特性和代价',
      content: [
        {
          type: 'table',
          headers: ['特性', '优势', '代价'],
          rows: [
            ['透明', '任何人可验证', '隐私性差'],
            ['不可篡改', '数据可信', '错误无法纠正'],
            ['去信任', '不依赖中心机构', '效率低、成本高'],
            ['不可逆', '交易最终性强', '操作失误无法挽回'],
          ],
        },
      ],
    },
    {
      id: '2.6-02',
      type: 'quote',
      title: '区块链的代价',
      content: [
        {
          type: 'text',
          value: '慢、贵、公开、不可逆',
        },
      ],
    },
    {
      id: '2.6-03',
      type: 'content',
      title: '不适合上链的五类场景',
      content: [
        {
          type: 'numbered',
          items: [
            '需要隐私保护的数据：医疗病历、商业机密、个人身份信息',
            '需要频繁修改的数据：用户在线状态、实时库存、协作文档',
            '对延迟敏感的业务：高频交易、游戏帧同步、实时视频',
            '已有可信中心的场景：银行内部系统、企业内部流程',
            '对成本敏感的小规模应用：个人博客、小型社区',
          ],
        },
      ],
    },
    {
      id: '2.6-04',
      type: 'content',
      title: '识别「伪区块链」项目',
      content: [
        {
          type: 'bullets',
          items: [
            '号称上链但实际中心化：数据存在公司服务器',
            '强行「区块链+」：区块链养鸡、区块链大米……',
            '发币是目的，应用是借口',
            '技术细节模糊：说不清用什么链、什么共识',
            '过度承诺：宣称能解决一切问题',
          ],
        },
      ],
    },
    {
      id: '2.6-05',
      type: 'content',
      title: '「区块链养鸡」的教训',
      content: [
        {
          type: 'bullets',
          items: [
            '传感器数据是谁上传的？——还是养殖场',
            '数据真实性谁保证？——还是要信任养殖场',
            '区块链解决了什么问题？——什么也没解决',
          ],
        },
        {
          type: 'highlight',
          value: '区块链保证链上数据不可篡改，但不保证源头数据真实。',
        },
      ],
    },
    {
      id: '2.6-06',
      type: 'content',
      title: '判断是否适合上链的核心问题',
      content: [
        {
          type: 'numbered',
          items: [
            '这个业务真的需要「去信任」吗？如果已经有可信中心，区块链可能多此一举',
            '不用区块链会有什么无法接受的后果？如果答案是「没什么特别的」，可能不需要区块链',
          ],
        },
      ],
    },
    {
      id: '2.6-07',
      type: 'content',
      title: '适合上链的场景',
      content: [
        {
          type: 'bullets',
          items: [
            '跨境汇款：需要去信任，传统银行慢且贵',
            '资产存证：需要不可篡改的时间戳记录',
            '供应链溯源（多方参与）：多个不互信的主体共享数据',
            '去中心化金融：消除中间人，降低成本和门槛',
            '数字资产所有权：需要可验证的稀缺性和所有权证明',
          ],
        },
      ],
    },
    {
      id: '2.6-summary',
      type: 'summary',
      title: '2.6 本节要点',
      content: [
        {
          type: 'bullets',
          items: [
            '区块链不是万能的，代价是：慢、贵、公开、不可逆',
            '五类不适合：需隐私、频繁修改、低延迟、已有可信中心、成本敏感',
            '警惕「伪区块链」项目：发币是目的，应用是借口',
            '核心问题：是否真的需要去信任？',
          ],
        },
      ],
    },

    // ========== Part 2 总结 ==========
    {
      id: '02-final',
      type: 'title',
      title: 'Part 2 完成',
      subtitle: '你已经理解了区块链的技术原理与边界',
    },
  ],
}
