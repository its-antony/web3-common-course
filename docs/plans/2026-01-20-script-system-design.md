# 讲稿系统设计方案

## 背景

Web3通识课已完成课程文档（12个Part）和PPT演示系统。为方便录制录播课，需要为每页PPT提供讲解稿，帮助讲师在录制时有参考内容。

## 功能目标

为录播课制作提供讲稿支持，让讲师可以在第二块屏幕上查看当前Part的讲稿。

## 核心设计

### 1. 讲稿内容

- **粒度**：每页PPT对应一段讲稿
- **类型区分**：
  - 理论内容：完整讲解词
  - 实操内容：标注 `> 【演示】操作描述`
- **风格**：专业详细不赘述，适当发散，举具体案例

### 2. 文件结构

```
slides/
├── src/
│   ├── scripts/              # 讲稿目录
│   │   ├── part00.md
│   │   ├── part01.md
│   │   ├── ...
│   │   └── part11.md
│   ├── pages/
│   │   └── ScriptViewer.tsx  # 讲稿查看页面
│   └── components/
│       └── ScriptRenderer.tsx # 讲稿渲染组件
```

### 3. Markdown 格式规范

```markdown
# Part 01：Web3 全局速览

---

## 第1页：欢迎来到 Web3 世界

本节课我们将从宏观视角了解Web3的全貌。在开始之前，让我们先思考一个问题：当我们说"去中心化"时，究竟意味着什么？

---

## 第2页：什么是区块链

区块链是一种分布式账本技术。你可以把它想象成一本公开的记账簿，所有人都可以查看，但没有任何单一方能够篡改已记录的内容。

---

## 第5页：创建你的第一个钱包

> 【演示】使用 MetaMask 创建钱包，完成助记词备份与转账操作

---
```

- 用 `---` 分隔每页
- 用 `## 第N页：标题` 标识对应的PPT页
- 用 `> 【演示】` 引用格式标识实操内容

### 4. UI 交互

#### Part 卡片改造

在现有的Part选择卡片上增加一个"讲稿"按钮：

```
┌─────────────────────────────┐
│  Part 01                    │
│  Web3 全局速览              │
│                             │
│  [开始演示]    [查看讲稿]   │
└─────────────────────────────┘
```

#### 讲稿查看页面 `/script/:partId`

```
┌─────────────────────────────────────────┐
│  ← 返回    Part 01 讲稿    [下载 MD]    │
├─────────────────────────────────────────┤
│                                         │
│  ## 第1页：欢迎来到 Web3 世界           │
│                                         │
│  本节课我们将从宏观视角了解Web3...      │
│                                         │
│  ─────────────────────────────────────  │
│                                         │
│  ## 第2页：什么是区块链                 │
│                                         │
│  区块链是一种分布式账本技术...          │
│                                         │
│  （滚动查看更多）                       │
└─────────────────────────────────────────┘
```

- 顶部：返回按钮 + 标题 + 下载按钮
- 主体：渲染Markdown内容，可滚动
- 样式：与PPT系统保持一致的暗色风格

## 技术实现

### 路由配置

新增路由 `/script/:partId`，指向 ScriptViewer 页面。

### Markdown 加载与渲染

- 使用 Vite 的 `?raw` 后缀直接导入 `.md` 文件内容
- 使用 `react-markdown` 库渲染 Markdown

```typescript
// 加载讲稿
import part01Script from '../scripts/part01.md?raw'

// 渲染
<ReactMarkdown>{scriptContent}</ReactMarkdown>
```

### 下载功能

创建 Blob 对象并触发下载：

```typescript
const handleDownload = () => {
  const blob = new Blob([scriptContent], { type: 'text/markdown' })
  const url = URL.createObjectURL(blob)
  const a = document.createElement('a')
  a.href = url
  a.download = `${partId}-script.md`
  a.click()
}
```

### 依赖新增

- `react-markdown`：Markdown 渲染
- 可选：`remark-gfm` 支持表格等扩展语法

## 讲稿内容生成

### 生成策略

1. **基于现有课程文档** - 每个Part的Markdown文档已经有完整内容，讲稿从中提炼
2. **结合PPT数据** - 参考 `presentations/partXX.ts` 中每页的标题和要点
3. **批量生成** - 按Part逐个生成，每个Part生成完毕后提交

### 生成规则

| PPT类型 | 讲稿处理 |
|---------|----------|
| 标题页/章节页 | 简短引入语 |
| 理论内容页 | 完整讲解词（2-4句），可发散举例 |
| 代码/图表页 | 讲解要点 + 指引观看 |
| 实操演示页 | `> 【演示】操作描述` |
| 总结/金句页 | 简短收尾语 |

### 讲稿风格

- **专业详细**：准确解释概念，不含糊
- **不赘述**：一个点讲清楚就进入下一个，不反复
- **适当发散**：引入相关背景、行业动态、类比
- **具体案例**：用真实项目、事件、数据说明

**示例**：

> "DeFi，去中心化金融，核心理念是用智能合约替代传统金融中介。举个例子，2020年Compound推出流动性挖矿，用户存入资产就能获得COMP代币奖励，这直接引爆了那年的'DeFi Summer'，锁仓量从不到10亿美元飙升到超过100亿。这让我们看到，激励机制设计得当，可以快速引导用户行为。"

## 工作量估计

### 系统开发

- ScriptViewer 页面
- ScriptRenderer 组件
- 路由配置
- Part卡片按钮改造
- 依赖安装

### 内容生成

- 12个Part讲稿文件
- 约480页PPT对应的讲解内容
